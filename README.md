# HS 품목분류 챗봇 🚀

HS 품목분류 전문가 AI 챗봇입니다. 관세청 품목분류 사례, 해외 HS 분류 사례, HS 해설서 등 다양한 데이터를 Multi Agents 시스템으로 분석하여 전문적인 HS 코드 분류 답변을 제공합니다.

## 📋 목차
- [핵심 기능](#핵심-기능)
- [설치 및 실행](#설치-및-실행)
- [기능별 사용법](#기능별-사용법)
- [프로젝트 구조](#프로젝트-구조)
- [환경 설정](#환경-설정)

## 🎯 핵심 기능

### 1. AI 자동분류 🤖
- 사용자 질문을 LLM이 자동으로 분석하여 가장 적합한 방식으로 답변
- 5가지 질문 유형 중 최적의 방법을 자동 선택

### 2. 웹 검색 🌐
- 물품개요, 용도, 뉴스, 무역동향, 산업동향 등 최신 정보 제공
- Google Search API를 통한 실시간 정보 검색

### 3. 국내 HS 분류사례 검색 🇰🇷
- 관세청 품목분류 사례 약 1,000개 데이터베이스 분석
- Multi Agents 시스템: 데이터를 5개 그룹으로 분할하여 각 그룹별로 유사한 3개 사례 검색
- Head Agent가 최종 취합하여 전문적인 HS 코드 분류 답변 제공

### 4. 해외 HS 분류사례 검색 🌍
- 미국 및 EU 관세청 품목분류 사례 분석
- Multi Agents 시스템: 해외 데이터를 5개 그룹으로 분할 분석
- 국제적인 HS 분류 동향 및 비교 분석 제공

### 5. HS 해설서 분석 (사용자 제시 코드) 📚
- 사용자가 직접 제시한 HS 코드들을 전문적으로 비교 분석
- 5단계 체계적 분석: 코드 추출 → 관세율표 정보 → 해설서 수집 → 통칙 준비 → AI 비교 분석
- 투명한 분석 과정: 각 단계별 진행 상황을 실시간으로 공개
- 여러 HS 코드의 장단점, 적용 가능성, 리스크 등을 종합 평가

### 6. HS 해설서 원문 검색 📖
- 특정 HS 코드의 해설서 원문을 구조화된 형태로 제공
- 통칙, 부/류/호 해설을 체계적으로 정리하여 표시

## 🚀 설치 및 실행

### 필수 요구사항
```bash
pip install -r requirements.txt
```

### 환경 설정
1. `.env` 파일 생성:
```env
GOOGLE_API_KEY=your_google_api_key_here
```

2. 필요한 데이터 파일들을 `knowledge/` 폴더에 배치:
   - `HS분류사례_part1.json` ~ `HS분류사례_part10.json` (국내 분류사례)
   - `HS위원회.json`, `HS협의회.json` (위원회/협의회 결정)
   - `hs_classification_data_us.json` (미국 관세청 데이터)
   - `hs_classification_data_eu.json` (EU 관세청 데이터)
   - `hstable.json` (관세율표 - 병렬검색용)
   - `통칙_grouped.json` (HS 통칙)
   - `grouped_11_end.json` (HS 해설서)

### 실행
```bash
streamlit run main.py
```

## 📖 기능별 사용법

### 1. AI 자동분류 사용법
**사용 시점**: 어떤 유형의 질문인지 확실하지 않을 때

**예시 질문**:
```
"리튬이온 배터리의 HS 코드가 무엇인가요?"
"전기차 시장 동향이 궁금합니다"
```

### 2. 웹 검색 사용법
**사용 시점**: 최신 물품 정보, 뉴스, 동향이 필요할 때

**예시 질문**:
```
"전기차 배터리 기술 발전 현황"
```

### 3. 국내 HS 분류사례 검색 사용법
**사용 시점**: 한국 관세청의 공식 분류 사례가 필요할 때

**예시 질문**:
```
"프로틴 파우더의 HS 코드는?"
"무선 이어폰 HS 분류"
```

### 4. 해외 HS 분류사례 검색 사용법
**사용 시점**: 미국/EU 관세청 분류 사례나 국제적 동향이 필요할 때

**예시 질문**:
```
"미국에서 전자담배 HS 분류는?"
"EU의 친환경 포장재 HS 코드"
```

### 5. HS 해설서 분석 사용법 (사용자 제시 코드)
**사용 시점**: 여러 HS 코드 중에서 최적의 코드를 선택하고 싶을 때

**분석 프로세스**:
1. 코드 추출: 사용자 입력에서 HS 코드 자동 인식
2. 관세율표 정보: 각 코드의 공식 품목명과 세율 정보 수집
3. 해설서 수집: 관련 통칙, 부/류/호 해설 자동 수집
4. 통칙 준비: HS 분류 기본 원칙 준비
5. AI 전문 분석: 종합적 비교 분석 및 최종 추천

**예시 질문**:
```
"스마트워치가 8517.62(스마트폰)와 9102.11(손목시계) 중 어디에 해당하나요?"
"전기차 충전기가 8504.40과 8544.42 중 어떤 코드인가요?"
```

### 6. HS 해설서 원문 검색 사용법
**사용 시점**: 특정 HS 코드의 공식 해설서 원문이 필요할 때

**예시 질문**:
```
"8517"
"HS 2106"
```


## 🏗️ 프로젝트 구조

```
HS_Chatbot/
├── main.py                 # Streamlit 메인 애플리케이션 (실시간 로깅 포함)
├── utils.py                # 핵심 기능 및 병렬 검색 시스템
├── hs_search.py            # HS 코드 검색 유틸리티
├── CLAUDE.md              # Claude Code 개발 가이드
├── .env                    # 환경 변수 (API 키)
├── requirements.txt        # 패키지 의존성 목록
├── README.md              # 프로젝트 문서
├── knowledge/             # 핵심 데이터 파일
│   ├── HS분류사례_part1.json ~ part10.json  # 국내 분류사례
│   ├── HS위원회.json, HS협의회.json          # 위원회 결정사항
│   ├── hs_classification_data_us.json       # 미국 관세청 데이터
│   ├── hs_classification_data_eu.json       # EU 관세청 데이터
│   ├── hstable.json                         # 관세율표 (병렬검색)
│   ├── 통칙_grouped.json                     # HS 통칙
│   └── grouped_11_end.json                  # HS 해설서
├── 품목분류표_제작/        # 관세율표 데이터 처리
└── previously/            # 이전 버전 백업
```

## ⚙️ 환경 설정

### 1. Google API 키 발급
1. [Google AI Studio](https://makersuite.google.com/app/apikey) 접속
2. API 키 생성
3. `.env` 파일에 추가

### 2. 데이터 준비
- 관세청 공식 HS 분류 사례 데이터
- 해외 관세청 분류 데이터
- HS 해설서 및 통칙 데이터

### 3. 성능 최적화 및 고급 기능
- **Streamlit 캐싱**: `@st.cache_resource`로 HSDataManager 최적화
- **Multi Agents 시스템**: 대용량 데이터를 5개 그룹으로 병렬 처리
- **병렬 검색 엔진**: 관세율표 + 해설서 동시 검색으로 정확도 향상
- **실시간 로깅**: 모든 AI 처리 과정의 투명한 시각화

## 📄 라이선스

이 프로젝트는 MIT 라이선스를 따릅니다.

